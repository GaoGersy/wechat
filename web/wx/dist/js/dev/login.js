require(["../requireconfig"],function(){require(["zepto","vue","vue-resource","layer","global"],function(e,o,r,n,t){({init:function(){var e=this;o.use(r),e.index=new o({el:"#login",data:{userInfo:"",imgUrl:t.imgUrl+"getJpgCode",openID:t.getUrl("openId"),redirectUrl:t.getUrl("redirectUrl")},methods:{reloadCode:function(){var e=this;document.getElementById("img-code").src=e.imgUrl+"?"+new Date},login:function(){var e=this,o=$(".user-name").val(),r=$(".password").val(),n=($(".validation").val(),$("#weuiAgree").is(":checked"),$(".validation").val());if(null==o||0==o.length)return t.popupMobile.msg("请输入用户名"),!1;if(null==r||0==r.length)return t.popupMobile.msg("请输入密码"),!1;var i={openId:e.openID,userName:o,passWord:r,autoStatus:1,randCode:n};window.localStorage.setItem("openId",e.openID);var l=t.baseUrlfjh+"user/login";e.$http.post(l,i).then(function(o){200==o.data.code?(t.popupMobile.msg("登陆成功"),e.userInfo=o.data.data,""==e.redirectUrl||null==e.redirectUrl?window.location.href="./logout.html?openId="+e.openID:window.location.href=e.redirectUrl):(t.popupMobile.msg(o.data.error),e.reloadCode())},function(o){t.popupMobile.msg(o.data.error),e.reloadCode()})}},mounted:function(){this.openID=t.getUrl("openId")}})}}).init()})});