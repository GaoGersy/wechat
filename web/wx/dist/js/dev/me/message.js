require(["../../requireconfig"],function(){require(["zepto","vue","vue-resource","layer","global","dropload"],function(e,o,t,a,i,n){({init:function(){var e=this;o.use(t),o.filter("timeFomat",function(e){}),e.index=new o({el:"#message",data:{currentPage:1,pageSize:20,list:[],time:"",iswork:!1,isnull:!1,isloading:!1},methods:{getList:function(e){var o=this;o.isloading=!0;var t=i.baseUrlgch+"notice/getAllNotice?currentPage="+o.currentPage+"&pageSize="+o.pageSize;o.$http.get(t).then(function(t){if(200!=t.data.code)return o.isloading=!1,o.iswork=!0,!1;if(200==t.data.code){var a=t.data.data;0!=a.list.length?($.each(a.list,function(e,t){o.list.push(t)}),a.hasNextPage?(console.log("有数据"),e.unlock(),e.noData(!1)):(console.log("无数据"),e.lock(),e.noData()),o.currentPage++,setTimeout(function(){e.resetload()},1e3)):console.log("无数据")}else i.popupMobile.msg(t.data.error),e.resetload()},function(){i.popupMobile.msg("获取失败")})},getDetail:function(e){window.location.href="./detail.html?id="+e.id}},filters:{timeFomat:function(e){var o=new Date(e).getTime();return o=i.dateFormat(o,"yyyy-MM-dd")}},mounted:function(){var e=this;$(".content").dropload({scrollArea:window,threshold:100,domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">↑上拉加载更多</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>加载中...</div>',domNoData:'<div class="dropload-noData">已经到底了！</div>'},loadDownFn:function(o){e.getList(o)}})}})}}).init()})});