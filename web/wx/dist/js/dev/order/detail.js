require(["../../requireconfig"],function(){require(["zepto","vue","vue-resource","layer","global","air"],function(t,e,o,i,a,d){({init:function(){var t=this;e.use(o),t.index=new e({el:"#app",data:{map:"",zoom:12,marker:"",infoWin:"",bounds:"",SouthWestX:"",SouthWestY:"",NorthEastX:"",NorthEastY:"",dataId:a.getUrl("dataId"),orderDetail:[],satelliteId:"",sensorId:"",productId:"",sceneId:"",productType:"",applyState:"",disstate:a.getUrl("disstate"),bottomLeftLatitude:"",bottomLeftLongitude:"",bottomRightLatitude:"",bottomRightLongitude:"",topRightLatitude:"",topRightLongitude:"",topLeftLatitude:"",topLeftLongitude:"",LonAndLat:""},methods:{onLoad:function(t,e){var o=this;o.map=new T.Map("mapDiv"),o.map.centerAndZoom(new T.LngLat(t,e),12)},getOrderDetail:function(){var t=this,e={dataid:t.dataId},o=a.baseUrlfjh+"order/getBasSateliteTerm";t.$http.post(o,e).then(function(e){if(200==e.data.code){$(".bottom-data").show(),console.log("vm.isShow"+t.isShow),t.orderDetail=e.data.data,t.satelliteId=t.orderDetail.satelliteid;var o=a.getPx(t.orderDetail.satelliteid,t.orderDetail.sensorid);t.sensorId=o.resolving,t.productId=t.orderDetail.productid,t.sceneId=t.orderDetail.sceneid,"0"==t.orderDetail.producttype?t.productType="原始":"1"==t.orderDetail.producttype?t.productType="正射":"2"==t.orderDetail.producttype?t.productType="匀色":"3"==t.orderDetail.producttype&&(t.productType="镶嵌"),0==t.disstate?t.applyState="未审核":1==t.disstate?t.applyState="审核通过":t.applyState="未通过","GF1"==t.satelliteId?t.satelliteId="高分一号":"GF2"==t.satelliteId?t.satelliteId="高分二号":"GF3"==t.satelliteId?t.satelliteId="高分三号":"GF4"==t.satelliteId&&(t.satelliteId="高分四号"),t.bottomLeftLatitude=t.orderDetail.bottomleftlatitude,t.bottomLeftLongitude=t.orderDetail.bottomleftlongitude,t.bottomRightLatitude=t.orderDetail.bottomrightlatitude,t.bottomRightLongitude=t.orderDetail.bottomrightlongitude,t.topRightLatitude=t.orderDetail.toprightlatitude,t.topRightLongitude=t.orderDetail.toprightlongitude,t.topLeftLatitude=t.orderDetail.topleftlatitude,t.topLeftLongitude=t.orderDetail.topleftlongitude,console.log(t.orderDetail.topleftLongitude),t.onLoad(t.bottomLeftLatitude,t.bottomLeftLongitude);var i=[];i.push(new T.LngLat(t.bottomRightLongitude,t.bottomRightLatitude)),i.push(new T.LngLat(t.bottomLeftLongitude,t.bottomLeftLatitude)),i.push(new T.LngLat(t.topLeftLongitude,t.topLeftLatitude)),i.push(new T.LngLat(t.topRightLongitude,t.topRightLatitude)),t.LonAndLat="("+t.bottomRightLongitude+","+t.bottomRightLatitude+"),("+t.bottomLeftLongitude+","+t.bottomLeftLatitude+"),("+t.topLeftLongitude+","+t.topLeftLatitude+"),("+t.topRightLongitude+","+t.topRightLatitude+")",console.log(t.LonAndLat),t.map.panTo(new T.LngLat(t.bottomRightLongitude,t.bottomRightLatitude)),t.map.setZoom(9);var d=new T.Polygon(i,{color:"red",weight:2,opacity:.5,fillColor:"#FFFFFF",fillOpacity:.5});t.map.addOverLay(d)}else a.popupMobile.msg("请求失败1")},function(){a.popupMobile.msg("请求失败2")}),setTimeout(function(){$(".loading").hide()},500)},upAndDown:function(t){var e=$(t.currentTarget);e.is(".down")?(e.addClass("up").removeClass("down"),$(".bottom-data").css("bottom",-120)):(e.addClass("down").removeClass("up"),$(".bottom-data").css("bottom",0)),console.log($(t.currentTarget).is(".down"))}},mounted:function(){var t=this;t.getOrderDetail(),$(".detail").on("touchstart",function(e){t.map.disableDrag(),e.stopPropagation()}),$(".detail").on("touchmove",function(e){t.map.disableDrag(),e.stopPropagation()}),$(".detail").on("touchend",function(e){setTimeout(function(){t.map.enableDrag()},2e3)}),$(".detail").on("swipe",function(e){t.map.disableDrag(),e.stopPropagation()}),$(".detail").on("swipeLeft",function(e){t.map.disableDrag(),e.stopPropagation()}),$(".detail").on("swipeRight",function(e){t.map.disableDrag(),e.stopPropagation()}),$(".detail").on("swipeUp",function(e){t.map.disableDrag(),e.stopPropagation()}),$(".detail").on("swipeDown",function(e){t.map.disableDrag(),e.stopPropagation()})}})}}).init()})});